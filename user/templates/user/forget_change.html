{% load static %}
<!doctype html>
<html lang="en" class="h-100">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>重置密码</title>

    <link href="{% static 'user/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'user/css/login.css' %}" rel="stylesheet">
    <script src="{% static 'user/js/bootstrap.min.js' %}"></script>

    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>
    <!-- Custom styles for this template -->
    <link href="{% static 'user/css/cover.css' %}" rel="stylesheet">
  </head>

<body class="d-flex h-100 text-center text-white bg-dark">
<div class="cover-container d-flex w-400 h-100 p-3 mx-auto flex-column">
  <header class="mb-auto">
    <div>
      <h3 class="float-md-start mb-0">ScanWebShell</h3>
      <nav class="nav nav-masthead justify-content-center float-md-end">
        <a class="nav-link active" aria-current="page" href="/index/">Home</a>
        <a class="nav-link" href="/user/login/">Login</a>
      </nav>
    </div>
  </header>

  <main class="px-3">
    <form class="form-login" action="/user/forget/change/" method="post">

        {% if forget_change_form.captcha.errors %}
            <div class="alert alert-warning">{{ forget_change_form.captcha.errors }}</div>
        {% elif message %}
            <div class="alert alert-warning">{{ message }}</div>
        {% endif %}

      {% csrf_token %}

      <h3 class="text-center">请输入新的密码</h3>

      <div class="form-group">
          {{ forget_change_form.password1.label_tag }}
          {{ forget_change_form.password1}}
      </div>
        <div class="form-group">
          {{ forget_change_form.password2.label_tag }}
          {{ forget_change_form.password2}}</div>
    <div>
         <input type='hidden' name="code" value="{{ code }}" />
    </div>
      <div class="form-group">
          {{ forget_change_form.captcha.label_tag }}
          {{ forget_change_form.captcha }}
      </div>

        <div>
          <button type="submit" class="btn btn-primary float-right">重置密码</button>
      </div>
    </form>
  </main>


  <footer class="mt-auto text-white-50">
    <p>Created by <a href="http://is.cumt.edu.cn/" class="text-white">BXS</a>@<a href="https://xzaslxr.xyz/" class="text-white">fe1w0</a>.</p>
  </footer>

    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    {#刷新验证码的脚本，放到body部分的最后面即可#}
    <script>
            $('.captcha').click(function () {
                $.getJSON('/user/refresh/',function (result) {
                    $('.captcha').attr('src',result['image_url']);
                    $('#id_captcha_0').val(result['key']);
                });
            });
    </script>
</div>
  </body>
</html>